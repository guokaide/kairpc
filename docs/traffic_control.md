# 限流

## 需求讨论

每个服务的接口都是有流量限制的，比如说，
* 读接口：每秒最多访问 1000 次
* 写接口：每秒最多访问 100 次

为了避免调用方频繁调用，我们可以使用限流技术，防止服务超过流量阈值，而无法使用。

## 限流方案

1. 令牌桶
2. 漏桶
3. 滑动窗口

前两者是主流的限流方案，这里为了复用之前的限流代码，我们选择使用滑动窗口限流。

## 扩展设计

1. 针对服务进行限流
2. 针对接口进行限流
3. 针对服务实例做全局限流：多个服务实例共享同一个阈值，比如说秒杀业务，可以通过 redis 实现